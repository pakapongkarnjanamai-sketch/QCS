<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QCS - @ViewData["Title"]</title>



    @await RenderSectionAsync("ExternalDependencies", required: false)


    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />

    <link href="~/css/devextreme/bootstrap.min.css" rel="stylesheet" />
    <link href="~/css/devextreme/dx.light.compact.css" rel="stylesheet" />
    <link href="~/lib/font-awesome/css/all.min.css" rel="stylesheet" />
    <script src="~/js/devextreme/filesaver.min.js"></script>
    <script src="~/js/devextreme/exceljs.min.js"></script>

    <script src="~/js/devextreme/jquery.js"></script>
    <script src="~/js/devextreme/bootstrap.js"></script>
    <script src="~/js/devextreme/dx.all.js"></script>

    <script src="~/js/devextreme/aspnet/dx.aspnet.mvc.js"></script>
    <script src="~/js/devextreme/aspnet/dx.aspnet.data.js"></script>

    <script src="~/src/devextreme-license.js"></script>
    <script src="~/js/site.js"></script>
    <script src="~/lib/font-awesome/js/all.min.js"></script>
    <environment names="Development">
        <script src="~/host/development.js"></script>
    </environment>
    <environment names="Staging,Production">
        <script src="~/host/production.js"></script>
    </environment>

    <style>
        .navbar {
            padding-left: 24px;
            padding-right: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .navbar-brand {
            /* color: white !important; */
            font-size: 1.5rem;
            font-weight: 700;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
        }

            .navbar-brand:hover {
                color: #255C8C !important;
                text-decoration: none;
            }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding-top: 80px;
        }


        .gridContainer {
            margin: 0px 20px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 8px;
            height: calc(100vh - 120px);
            min-width: 1280px;
            min-height: 840px;
        }

    </style>

    @await RenderSectionAsync("Styles", required: false)

</head>

<body>
    <nav class="navbar navbar-light bg-light fixed-top navbar-expand-md">
        <a class="navbar-brand" href="@Url.Action("Index", "Home")">
            QCS
            <span class="version-badge">Admin</span>
        </a>
        <div id="menu"></div>

    </nav>


    @RenderBody()


    <script>
        $(function () {
            $("#menu").dxMenu({
                 dataSource: [
                    {
                        text: "Dashboard",
                        icon: "home",
                        path: "@Url.Action("Index", "Home")"
                    },
                    {
                        text: "Documents",
                        icon: "file",
                        items: [
                            { text: "ใบขอซื้อ (Purchase Requests)", icon: "cart", path: "@Url.Action("PurchaseRequest", "Home")" },
                            { text: "ใบเสนอราคา (Quotations)", icon: "doc", path: "@Url.Action("Quotation", "Home")" }
                        ]
                    },
                   {
                        text: "Settings",
                        icon: "preferences",
                        items: [
                             { text: "ลำดับการอนุมัติ (Approval Steps)", icon: "orderedlist", path: "@Url.Action("ApprovalStep", "Home")" },
                            { text: "Departments", icon: "orderedlist", path: "@Url.Action("Departments", "Account")" },
                            { text: "Users", icon: "group",  path: "@Url.Action("Users", "Account")" } ,
                            { text: "Roles", icon: "group",  path: "@Url.Action("Roles", "Account")" } ,
                        ]
                    }
                ],
                displayExpr: "text",
                showFirstSubmenuMode: "onHover",
                orientation: "horizontal",
                hideSubmenuOnMouseLeave: true,
                selectionMode: "single",
                onItemClick: function (e) {
                    if (e.itemData.path && e.itemData.path !== "#") {
                        window.location.href = e.itemData.path;
                    }
                },
                onItemRendered: function(e) {
                    // Custom Logic สำหรับใส่ Badge แจ้งเตือน (ถ้ามีข้อมูลใน field badge)
                    if(e.itemData.badge) {
                        $("<span>")
                            .addClass("badge bg-danger ms-2 rounded-pill")
                            .text(e.itemData.badge)
                            .appendTo(e.itemElement);
                    }
                }
            });
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>